define(["jquery"],function(a){var b={init:function(){this.switchBtn=a("#switchingProject");this.menuItems=a("#menuItems");this.setEvent()},layerResize:function(c){var d=this;a(window).resize(function(){var e=d.layerPosition();a(c).css({top:e.top,left:e.left})})},layerPosition:function(){var d=this.switchBtn.offset();var e=d.top+this.switchBtn.height()-a(window).scrollTop()+10+"px";var c=d.left-40+"px";return{top:e,left:c}},getProjectUser:function(c){a.ajax({type:"post",data:{projectId:c},url:context+"/project/listProjectAllUser.htm"}).done(function(d){if(d&&d.success){if(d.resultData){window.projectUserList=d.resultData}}else{if(d&&!d.success){layer.msg(d.errormsg)}else{layer.msg("请求失败")}}})},setEvent:function(){var c;var d=this;layer.closeAll();this.switchBtn.on("click",function(f){var e=d.layerPosition();c=a.layer({type:1,title:false,area:["auto","auto"],offset:[e.top,e.left],border:[0],shade:[0,"#FFFFFF"],closeBtn:[0],area:["120px","80px"],page:{dom:"#hideAllProectList"},success:function(g){d.switchingProjectEvent(g);document.documentElement.style.overflow="hidden"},end:function(g){document.documentElement.style.overflow=""}});return false})},switchingProjectEvent:function(c){var d=this;var e=a("div.main-content[data-id='projectTemplate']");d.layerResize(c);a(c).on("click",function(){return false});a(c).find("i.icon-ok").hide();a(c).find("li[data-id='"+e.data("projectId")+"']").find("i.icon-ok").show();a(c).on("change paste keyup","input",function(){var f=a(this).val();if(f==""){a(c).find("li").show()}else{a(c).find("li").hide();a(c).find("li.project:contains('"+f+"')").show()}});a(c).on("click","ul li.project",function(){var g=a("div.main-content[data-id='projectTemplate']");if(a(this).data("id")==g.data("projectId")){return false}else{g.data("projectId",a(this).data("id"));d.switchBtn.find("span").text(a(this).text());var f=d.menuItems.find(".select").attr("id");d.getProjectUser(a(this).data("id"));if(f=="taskBoard"){g.load(context+"/task/loadTaskBoard.htm",{projectId:a(this).data("id")})}else{if(f=="fileLibrary"){g.load(context+"/filelibrary/loadfilelibraryview.htm",{projectId:a(this).data("id")})}else{if(f=="dynamic"){g.load(context+"/dynamic/loadDynamicView.htm?uuid=1")}else{if(f=="weekly"){g.load(context+"/weeklyReport/loadWeeklyReportview.htm?projectId="+a(this).data("id"))}else{if(f=="meetting"){g.load(context+"/meeting/loadmeetingview.htm",{projectId:a(this).data("id")})}}}}}layer.closeAll()}return false})}};return b});