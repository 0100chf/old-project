$(function(){var a=$("#resetPasswordDiv"),d=$("#resetPassword",a),b=$("#account",a),c=new InputValidate(b,true,30,0,"email",null);d.on("click",function(e){EventUtil.preventDefault(e);var g={account:b.val()},f=this;$(f).prop("disabled",true);$.ajax({type:"post",url:context+"/user/reset.htm",data:g,beforeSend:function(){if(!c.checkValidate()){$(f).prop("disabled",false);return false}return true},success:function(h){if(h&&h.success){window.location=context+"/user/resetPasswordNext.htm?account="+b.val()}else{if(h&&!h.success&&h.errormsg){layer.alert(h.errormsg)}else{layer.alert("请求失败",1)}}$(f).prop("disabled",false)},error:function(){layer.alert("请求失败",1);$(f).prop("disabled",false)}})})});