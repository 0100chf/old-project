InputValidate.prototype.handler=function(){var h=this.target,a=this.required,d=this.maxLength,g=this.minLength,i=this.type,b=this.pattern,c=this.confirmpwd,e=["该项为必填项","输入值长度应不大于"+d,"输入值长度应不小于"+g,"请输入正确的邮箱格式","输入错误","密码由数字、字母和下划线组成","两次输入的密码不一致","手机号码格式不对","请输入100以内的整数","请不要输入|"],f=[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})/,/[^a-zA-Z0-9_]{1}/,/^1[3|5|7|8|][0-9]{9}$/,/^([1]?\d{1,2})$/,/^[^|]*$/];if(h&&(h.is("input")||h.is("textarea"))&&h.length>0){h.on({validateEvent:function(j){EventUtil.preventDefault(j);var k=$(this);var l=k.val().trim().length||0;if(a==true&&k.val().trim().length<=0){this.currentMsg=e[0];k.addClass("error");return}if(d&&d>0&&l>d){this.currentMsg=e[1];k.addClass("error");return}if(g&&g>0&&l<g){this.currentMsg=e[2];k.addClass("error");return}if(i){switch(i){case"email":if(k.val()&&f[0].test&&!f[0].test(k.val())){this.currentMsg=e[3];k.addClass("error");return}break;case"password":if(k.val()&&f[1].test(k.val())){this.currentMsg=e[5];k.addClass("error");return}break;case"telphone":if(k.val()&&!f[2].test(k.val())){this.currentMsg=e[7];k.addClass("error");return}break;case"percentage":if(k.val()&&!f[3].test(k.val())){this.currentMsg=e[8];k.addClass("error");return}break;case"verticalline":if(k.val()&&!f[4].test(k.val())){this.currentMsg=e[9];k.addClass("error");return}break;default:break}}if(b&&b.test&&!b.test(k.val())){this.currentMsg=e[4];k.addClass("error");return}if(c&&c.is("input")&&c.length>0){if(c.val()!=k.val()){this.currentMsg=e[6];k.addClass("error");return}}k.removeClass("error");this.currentMsg=""},blur:function(){$(this).trigger("validateEvent");return false},change:function(){$(this).trigger("validateEvent");return false},mouseover:function(){var j=$(this);if(j&&j.hasClass("error")){layer.tips(this.currentMsg,this,{guide:2,time:1})}return false}})}};InputValidate.prototype.checkValidate=function(){var a=this.target;a.trigger("validateEvent");if(a.length>0&&a.hasClass("error")){return false}return true};function InputValidate(c,e,g,a,b,f,d){this.target=c;this.required=e;this.maxLength=g;this.minLength=a;this.type=b;this.pattern=f;this.confirmpwd=d;this.handler()}Date.prototype.format=function(a){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/i.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var b in c){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(c[b]):(("00"+c[b]).substr((""+c[b]).length)))}}return a};if(!Array.prototype.forEach){Array.prototype.forEach=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this){b.call(d,this[c],c,this)}}}}Array.prototype.getIndexOfItem=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1};var EventUtil={getEvent:function(a){return a||window.event},getTarget:function(a){return a.target||a.srcElement},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBulle=true},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=false}};var StatusCode={chatRecordType_text:0,chatRecordType_picture:1,chatRecordType_file:2,notExistUser:"账号不存在",pwdError:"密码错误",registerFail:"注册失败"};File.prototype.getFormatSize=function(e){var c=0.0009765625;var a=this.size;if(["B"].getIndexOfItem(e)>-1){return""+a+e}else{if(["KB","B"].getIndexOfItem(e)>-1){return""+(a*c).toFixed(2)+e}else{if(["MB","M"].getIndexOfItem(e)>-1){return""+(a*c*c)+e}else{var d=["B","KB","MB"];var b=0;while(true){if(b==2||a<100){return""+a.toFixed(2)+d[b]}a*=c;b++}}}}return a};File.prototype.limitSize=function(a,d){var c=0.0009765625;var b=this.size;if(["B"].getIndexOfItem(d)>-1){return b>a}else{if(["KB","K"].getIndexOfItem(d)>-1){return b*c>a}else{if(["MB","M"].getIndexOfItem(d)>-1){return b*c*c>a}}}return b>a};